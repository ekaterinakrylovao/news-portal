import time
import requests

# URL для отправки запросов
articles_url = "http://newspaper-backend:8081/articles"
images_url = "http://newspaper-backend:8081/images/upload/"

# Тела запросов
articles = [
    {
        "title": "Большой обзор Chery Tiggo 9: кому понравится «макси-тигр»",
        "content": "Россия стала первой страной, если не считать Китай, где продается новый полноразмерный кроссовер Chery – свежая модель, всего несколько месяцев назад представленная в Пекине. Успели обзавестись семьей, остепениться и готовы потратить на комфорт четыре «ляма»? Присмотритесь, она вызовет у вас интерес.\n\nОбзоры принято начинать с описания салона и ездовых повадок, но я решил нарушить традицию, начав с того, что у меня в первую очередь вызвало уважение. И это большой зимний пакет – респект инженерам Chery. Причем он присутствует в полном объеме уже в менее дорогой комплектации Prime, предлагаемой по предзаказу за 4,2 млн. руб.\n\nУдивило внимание к мелочам, обычно китайцам не свойственное. Есть не только обогрев стекол, зеркал, руля и форсунок, но и обогрев 2 ряда сидений. Приводы выдвижных ручек усилены, чтобы справляться с обледенением. А еще есть двухслойные стекла на передних дверях, дающие хорошую термоизоляцию. Тормозную систему IPB тоже адаптировали к морозам, чтобы ее эффективность сохранялась.\n\nПервый российский тест-драйв Tiggo 9 проходил на Алтае в условиях высокогорья и морозов до -30°C, и все названные фишки отработали как надо. Единственное замечание в том, что в морозы ниже -20°C появляется туман в крутых светодиодных фарах. Но всего один недостаток – это хороший результат по сравнению с большинством одноклассников.\n\nДвигатель у «девятки» – двухлитровый четырехцилиндровый. Он принадлежит к последнему, четвертому поколению движков Chery и сделан целиком из алюминия. Мотор быстро прогревается после запуска, отзывчив на педаль газа, экологичен и экономичен. Только долговечность может вызывать вопросы, но прояснить этот вопрос пока невозможно.\n\nНесмотря на скромный объем, мотор развивает 249 л. с. На экземплярах, продаваемых в России, он немного дефорсирован, чтобы переваривать некачественный бензин Аи-92.\n\nКоробка передач – восьмискоростной «классический» автомат, разработанный инженерами Chery «по образу и подобию» японских КПП Aisin.\n\nИ у меня, и у других коллег сложилось впечатление, что Tiggo 9 на голову выше других кроссоверов в линейке Chery: «4», «7» и «8». Чтобы достойно отразить разницу, я бы заменил индекс «9» на «10» или даже «11».",
        "imageUrl": "image.jpg",
        "publishedDate": "2024-12-24T10:00:00"
    },
    {
        "title": "Самый российский электромобиль встал на конвейер. И это не «Атом»",
        "content": "На сборочном конвейере АвтоВАЗ в Ижевске началась промышленная сборка Lada e-Largus. Уникальная фишка этого электромобиля в необычайно высокой степени локализации – даже батарея у него отечественная.\n\nДля e-Largus были разработаны отечественные аккумулятор – самая дорогая часть любого электромобиля, системы управления и термостатирования. Электромотор и силовую установку для него проектировала российская компания «Системы автономной энергии».\n\nЧтобы сохранить жизненное пространство внутри машины, хранилище электроэнергии было разделено на два блока аккумуляторов: один находится под капотом, второй на том месте, где в обычной Lada Largus был бензобак. Поэтому объём багажника не уменьшился – в пассажирской версии он по-прежнему достигает 560 л, у фургона 2540 л.\n\nЗапас хода электрического Largus составляет 420 км в пассажирской версии, от 360 км в грузовой. Электродвигатель мощностью 120 кВт разгоняет его до 100 км/ч за 9 секунд, а максимальная скорость электронно ограничена на уровне 145 км/ч.",
        "imageUrl": "image.jpg",
        "publishedDate": "2024-12-24T10:00:00"
    },
    {
        "title": "Новый герой: тест-драйв обновлённого кроссовера JAECOO J7 со «сверхполным» приводом",
        "content": "В числе ключевых новшеств версии производитель отмечал инновационную технологию полного привода с управлением вектором тяги Torque-Vectoring AWD. На словах улучшения казались не более чем маркетинговым ходом: как можно улучшить и без того интеллектуальный полный привод? Но устроив кроссоверу внедорожный тест-драйв на мотодроме, а потом по лесным маршрутам с песком, лужами, мокрой грязью и всеми вытекающими последствиями, от наших предубеждений мало что осталось. Машина не только доказала, но и показала на дисплее в режиме реального времени, на что способен «сверхполный» привод в деле.\n\nПервое, что бросается в глаза, когда садишься за руль, – огромный люк на фоне чёрной отделки крыши, который охватывает два ряда сидений. Визуально тёмный цвет вместо прежнего светлого играет здесь в плюс: теперь внутри кроссовер выглядит более спортивно и сбалансированно. Гармония прослеживается и в том, как дополняют друг друга хромированные массивные детали интерьера, нарочито отсылающие к внедорожной породе, и сдержанные, но разнофактурные материалы отделки с натуральной прострочкой.\n\nСистемные обновления получил центральный дисплей, на выбор – несколько конфигураций отображения приложений. Сменить можно и тему приборной панели. Но полная комплектация не была бы топовой, если бы в комплекте с умной электроникой не шёл полный пакет интеллектуальных помощников. Помимо классического круиз-контроля, удержания в полосе, предупреждении о помехах и мониторинга слепых зон, самостоятельный J7 способен предотвращать столкновения при движении вперед и задним ходом, следить за усталостью водителя и сигнализировать, если впереди идущая машина уже сдвинулась с места в пробке, а вы всё продолжаете набирать сообщение. Системы активной безопасности помогают с перестроением, что особенно полезно неопытным водителям, а камеры с обзором 540 градусов выручают при выезде из узких дворов даже закалённых автолюбителей. Кстати, умные датчики на дверях не позволят их распахнуть, если заметят, что сзади к машине приближается другой автомобиль.",
        "imageUrl": "image.jpg",
        "publishedDate": "2024-12-24T10:00:00"
    },
    {
        "title": "Rolls-Royce представила самый дорогой новый автомобиль в мире: знакомьтесь, Boat Tail II",
        "content": "Автопроизводитель Rolls-Royce представил первый созданный на заказ автомобиль под названием Boat Tail стоимостью 28 миллионов долларов. Второй экземпляр вышел ещё более дорогим.\n\nВ 2022 году компания Rolls-Royce представила второй из трёх эксклюзивных экземпляров кабриолета Boat Tail. Его дебют состоялся на Конкурсе элегантности Вилла д’Эсте в Италии. Заказчиком выступил бизнесмен, которой продолжает семейное дело по добыче жемчуга. Основа второго экземпляра Boat Tail – платформа Architecture of Luxury «восьмого» Phantom. Машина похожа на гоночную яхту начала XX века. Такого эффекта добились благодаря кузову машины, который состоит из цельных листов алюминия с минимальным количеством стыков. Проект Boat Tail начался с серии из четырёх жемчужных раковин из коллекции клиента, которые вдохновили Rolls-Royce на создание такого уникального цвета. Автопроизводитель называет его одним из самых сложных цветов, созданных на заказ.\n\nВ каждом из двух разделённых отсеков багажника Boat Tail находится всё необходимое для пикника в парке, включая столовые приборы, окрашенные в цвет автомобиля, и блюда с соответствующими акцентами. Также на «задней палубе» автомобиля можно выдвинуть зонтик, который идёт в комплекте и позволяет создавать тень в солнечную погоду.\n\nИнтерьер продолжает уникальный внешний вид, дополненный ореховым шпоном, кожей коньячного и устричного цветов, а также розовым золотом и перламутровыми акцентами. Изюминкой являются классические часы в центре приборной панели, выполненные из перламутра из коллекции клиента. Rolls-Royce Boat Tail II дебютировал на берегу озера Комо, Италия, в минувшие выходные и найдёт свой дом в частном музее коллекции автомобилей покупателя.",
        "imageUrl": "image.jpg",
        "publishedDate": "2024-12-24T10:00:00"
    },
    {
        "title": "Тест-драйв Lada Aura",
        "content": "Чуть больше года назад глава АвтоВАЗа показал новый удлинённый вариант «Весты» под именем Aura и пообещал, что если будет запрос, завод всё подготовит к серии и выдаст продукт в обозримой перспективе. В октябре сего года я уже прокатился на товарном автомобиле.\n\nВ конструкцию внесли более 240 изменений, и ещё каких! Почти все вытянутые на 25 см части кузова седана семейства Vesta – двери, крыша – это цельноштампованные элементы, а не разрезанные кузова с вварёнными вставками. Чтобы оценить эту веху, стоит помнить: АвтоВАЗ годами делал Ниву-2131 именно таким варварским способом. А здесь – только днище сваривают с использованием нового среднего элемента. Добавлены усилители, поэтому более длинный кузов не уступает в жёсткости стандартному. Да и по весу все показатели выдержаны: Aura по массе идентична универсалу, а значит, мотор, коробка передач и подвеска работают в штатном режиме, без перегрузок.\n\nНа месте водителя я тоже провёл пару часов и вот что могу сказать: шасси «Весты» проявляет себя в лучших традициях, а в сочетании с обновлённой настройкой подвести и вовсе радует. Вести «Ауру» приятно ровно до того момента, пока не захочется как следует разогнаться. Здесь все 122 силы 1,8-литрового мотора и вариатор очень напрягутся, но выдать динамичного ускорения не смогут. Неудивительно. Но всё ещё обидно, ибо я не устану повторять: к такому шасси нужен мотор минимум сил в 150, а лучше – в 200. Тогда автомобиль обретёт гармонию, а водители – счастье.",
        "imageUrl": "image.jpg",
        "publishedDate": "2024-12-24T10:00:00"
    }
]

# Путь к файлам изображений
image_files = [
    "/uploads/1735225143485_photo_2023-02-02_11-40-12_large.jpg",
    "/uploads/1735125387993_1.jpg",
    "/uploads/1735125807464_f8c10814a963bbe1897b499b6c51fee2-1280x720.jpg",
    "/uploads/1735126006121_226519_1_350.jpg",
    "/uploads/1735126091486_1721655474_u7z88cutmucfop1hiqfc.jpg"
]

# Функция для отправки POST-запросов
def post_articles_and_upload_images():
    article_ids = []

    # Отправляем POST-запросы для создания статей
    for i, article in enumerate(articles):
        try:
            response = requests.post(articles_url, json=article)
            response.raise_for_status()
            article_id = response.json().get("id")
            article_ids.append(article_id)
            print(f"Article {i + 1} posted successfully with ID {article_id}.")
        except requests.exceptions.RequestException as e:
            print(f"Error posting article {i + 1}: {e}")
        time.sleep(1)  # Пауза 1 секунда между запросами

    # Загрузка изображений для каждой статьи
    for i, article_id in enumerate(article_ids):
        if i >= len(image_files):
            print(f"No image available for article {i + 1} (ID: {article_id}). Skipping image upload.")
            continue

        try:
            with open(image_files[i], 'rb') as file:
                files = {'file': file}
                image_upload_url = f"{images_url}{article_id}"
                response = requests.post(image_upload_url, files=files)
                response.raise_for_status()
                print(f"Image uploaded successfully for article {i + 1} (ID: {article_id}).")
        except FileNotFoundError:
            print(f"Image file not found: {image_files[i]}. Skipping.")
        except requests.exceptions.RequestException as e:
            print(f"Error uploading image for article {i + 1} (ID: {article_id}): {e}")
        time.sleep(1)  # Пауза 1 секунда между запросами

# Отправляем статьи и загружаем изображения
post_articles_and_upload_images()
